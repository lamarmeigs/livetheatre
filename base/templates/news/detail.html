{% extends 'base_internal.html' %}

{% block body_classes %}section-news{% endblock %}

{% block admin_edit_link %}{% url 'admin:base_artsnews_change' news.id %}{% endblock %}

{% block main_title %}
<h2>{{ news.title }}</h2>
{% endblock %}

{% block article_content %}

{% if news.video_embed %}
<div class="video-embed">
    {{ news.video_embed|safe }}
</div>
{% elif news.slideshowimage_set.exists %}

<div id="news_slideshow" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    {% for image in news.slideshowimage_set.all %}
    <li data-target="#news_slideshow" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></li>
    {% endfor %}
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    {% for image in news.slideshowimage_set.all %}
    <div class="item {% if forloop.first %}active{% endif %}">
        <a href="{{ image.image.url }}">
            <img src="{{ image.image.url }}" alt="{{ image.image.name }}" />
        </a>
    </div>
    {% endfor %}
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#news_slideshow" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#news_slideshow" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
    
{% endif %}

{{ news.content|safe }}
{% endblock %}

{% block extra_content %}
{% endblock %}

{% block sidebar_content %}

{% if recent_reviews.exists %}
<div class="module">
    <h4>Recent Reviews</h4>
    <ul>
        {% for review in recent_reviews %}
        <li><a href="{% url 'review_detail' slug=review.slug %}">{{ review.get_title }}</a></li>
        {% endfor %}
    </ul>
    <div class="text-right">
        <a href="{% url 'reviews' %}">See More &raquo;</a>
    </div>
</div>
{% endif %}

{% if recent_news.exists %}
<div class="module">
    <h4>Recent News</h4>
    <ul>
        {% for news_item in recent_news %}
        <li><a href="{{ news_item.get_absolute_url }}">{{ news_item.title }}</a></li>
        {% endfor %}
    </ul>
    <div class="text-right">
        <a href="{% url 'news_list' %}">See More &raquo;</a>
    </div>
</div>
{% endif %}

{% if current_productions.exists %}
<div class="module">
    <h4>Current Productions</h4>
    <ul>
        {% for upcoming in current_productions %}
        <li><a href="{% url 'production_detail' upcoming.slug %}">{{ upcoming.title }}</a></li>
        {% endfor %}
    </ul>
    <div class="text-right">
        <a href="{% url 'productions_upcoming' %}">See more &raquo;</a>
    </div>
</div>
{% endif %}

{% endblock %}
